function thread(port, callback) {
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState === 4) {
            if (req.response != "") {
                callback(req.response);
            }
        }
    }

    req.open("GET", "http://127.0.0.1:" + port + "/");
    req.send();
};

const scanRange = function (ports) {
    var arrayLength = ports.length;
    for (var i = 0; i < arrayLength; i++) {
        thread(ports[i], function callback(response) {
            const el = document.createElement('div');
            el.innerText = 'Response Found :' + response;
            document.body.appendChild(el);
        });
    }
}

// top 500 ish ports
var ports = ["80", "631", "161", "137", "123", "138", "1434", "445", "135", "67", "23", "53", "443", "21", "139", "22", "500", "68", "520", "1900", "25", "4500", "514", "49152", "162", "69", "5353", "111", "49154", "3389", "110", "1701", "998", "996", "997", "999", "3283", "49153", "445", "1812", "136", "139", "143", "53", "2222", "135", "3306", "2049", "32768", "5060", "8080", "1025", "1433", "3456", "80", "1723", "111", "995", "993",
    "20031", "1026", "7", "5900", "1646", "1645", "593", "1025", "518", "2048", "626", "1027", "587", "177", "1719", "427", "497", "8888", "4444", "1023", "65024", "199", "19", "9", "49193", "1029", "1720", "49", "465", "88", "1028", "17185", "1718", "49186", "548", "113", "81", "6001", "2000", "10000", "31337", "514", "49201", "49192", "515", "2223", "443", "5060", "49181", "179", "1813", "1026", "120", "158", "2000", "49200", "8443",
    "8000", "3703", "32815", "17", "32768", "5000", "32771", "33281", "554", "1030", "26", "1022", "1433", "623", "49152", "32769", "5632", "10000", "49194", "49191", "49182", "49156", "2001", "9200", "515", "30718", "49211", "49190", "49188", "49185", "5001", "5355", "8008", "49154", "32770", "37444", "34861", "34555", "1027", "1032", "4045", "3130", "1031", "5666", "646", "49196", "49158", "37", "2967", "5000", "4000", "989", "3659",
    "5631", "4672", "34862", "23", "631", "49153", "8081", "2049", "88", "49195", "49189", "49187", "49162", "79", "5800", "2148", "106", "2121", "1110", "49155", "41524", "6000", "513", "10080", "990", "5357", "427", "32772", "49156", "407", "42", "543", "544", "33354", "1034", "5101", "49199", "49180", "144", "3389", "1001", "6346", "7", "21", "13", "517", "1068", "389", "8009", "990", "1045", "1041", "1782", "6001", "19283", "49210",
    "49209", "49208", "49205", "49202", "49184", "49179", "49171", "3128", "9876", "444", "39213", "9999", "5009", "800", "7070", "389", "464", "1039", "1036", "1038", "1419", "5190", "192", "199", "44968", "3000", "5432", "1008", "49166", "49159", "1900", "3986", "1033", "1024", "13", "22986", "19682", "22", "1029", "9", "2002", "5051", "6646", "1021", "11487", "664", "49157", "58002", "49172", "49168", "49165", "49163", "1043", "1028",
    "873", "1755", "2717", "4899", "1885", "1049", "5093", "1044", "3052", "7938", "1019", "5351", "683", "6000", "5500", "9100", "27892", "16680", "119", "32773", "37", "1000", "3001", "41058", "35777", "113", "5001", "52225", "49174", "49169", "49160", "1056", "1047", "8193", "685", "1886", "686", "6004", "38293", "782", "82", "786", "10010", "38037", "1030", "32774", "9090", "2107", "1024", "780", "1080", "32775", "2103", "682", "2051",
    "1054", "9950", "983", "6971", "6970", "1014", "1066", "5050", "781", "31891", "31681", "31073", "30365", "30303", "29823", "28547", "27195", "25375", "22996", "22846", "21383", "20389", "20126", "20019", "19616", "19503", "19120", "18449", "16947", "16832", "6004", "42172", "33355", "1801", "5050", "32779", "19", "53571", "52503", "49215", "49213", "49212", "49204", "49198", "49175", "49167", "8031", "5002", "1041", "27015", "255",
    "2967", "1049", "1048", "1053", "3703", "1056", "1065", "1064", "1054", "5003", "17", "7000", "513", "1485", "1048", "1065", "1090", "684", "9103", "1037", "1761", "808", "3689", "32777", "539", "767", "434", "54321", "3401", "1031", "112", "1044", "1071", "5901", "512", "6347", "1000", "9102", "100", "8010", "2869", "1039", "5120", "4001", "9000", "363", "2105", "636", "47624", "42508", "45441", "41370", "41081", "40915", "40732",
    "40708", "40441", "40116", "39888", "36206", "35438", "34892", "34125", "33744", "32931", "32818", "1038", "38", "776", "2601", "32776", "64513", "63555", "62287", "61370", "58640", "58631", "56141", "54281", "51717", "50612", "49503", "49207", "49197", "49176", "49173", "49170", "49161", "49157", "7000", "1", "217", "1012", "775", "902", "3702", "8001", "9020", "1042", "643", "829", "1040", "1035", "1064", "1901", "688", "2160", "959"];

scanRange(ports);